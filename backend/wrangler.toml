name = "sm-auth-survey-api"
main = "src/index.js"
compatibility_date = "2024-09-05"
compatibility_flags = ["nodejs_compat"]

[env.production]
name = "sm-auth-survey-api"

[env.staging]
name = "sm-auth-survey-api-staging"

[env.development]
name = "sm-auth-survey-api-dev"

# D1 数据库配置
[[d1_databases]]
binding = "DB"
database_name = "sm-auth-survey-db"
database_id = "your-database-id-will-be-auto-generated"

# R2 存储配置
[[r2_buckets]]
binding = "BUCKET"
bucket_name = "sm-auth-survey-files"

# KV 存储配置（用于缓存和会话）
[[kv_namespaces]]
binding = "CACHE"
id = "your-kv-namespace-id"
preview_id = "your-preview-kv-namespace-id"

# 环境变量（开发环境，生产环境通过GitHub Secrets设置）
[vars]
ENVIRONMENT = "development"

# 生产环境变量（通过GitHub Actions设置）
[env.production.vars]
ENVIRONMENT = "production"

# CORS配置
[cors]
origins = ["*"]
methods = ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
headers = ["*"]

